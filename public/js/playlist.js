let playlist = ["http://themagicipod.com/RHCP-99P.mp3", "http://themagicipod.com/RHCP-BEO.mp3", "http://themagicipod.com/RHCP-DMX.mp3", "http://themagicipod.com/RHCP-GETL.mp3", "http://themagicipod.com/RHCP-IDC.mp3", "http://themagicipod.com/RHCP-MNB.mp3", "http://themagicipod.com/RHCP-RSS.mp3", "http://themagicipod.com/RHCP-TTS.mp3", "http://themagicipod.com/RHCP-MB.mp3", "http://themagicipod.com/RHCP-TIP.mp3", "http://themagicipod.com/SMA-99P.mp3", "http://themagicipod.com/SMA-BEO.mp3", "http://themagicipod.com/SMA-DMX.mp3", "http://themagicipod.com/SMA-GETL.mp3", "http://themagicipod.com/SMA-MB.mp3", "http://themagicipod.com/SMA-MNB.mp3", "http://themagicipod.com/SMA-RSS.mp3", "http://themagicipod.com/SMA-TTS.mp3", "http://themagicipod.com/SMA-TIP.mp3", "http://themagicipod.com/FRAN-99P.mp3", "http://themagicipod.com/FRAN-BEO.mp3", "http://themagicipod.com/FRAN-DMX.mp3", "http://themagicipod.com/FRAN-GETL.mp3", "http://themagicipod.com/FRAN-MB.mp3", "http://themagicipod.com/FRAN-MNB.mp3", "http://themagicipod.com/FRAN-RSS.mp3", "http://themagicipod.com/FRAN-TTS.mp3", "http://themagicipod.com/FRAN-TIP.mp3", "http://themagicipod.com/WEEZ-99P.mp3", "http://themagicipod.com/WEEZ-BEO.mp3", "http://themagicipod.com/WEEZ-DMX.mp3", "http://themagicipod.com/WEEZ-GETL.mp3", "http://themagicipod.com/WEEZ-LOSE.mp3", "http://themagicipod.com/WEEZ-MNB.mp3", "http://themagicipod.com/WEEZ-RSS.mp3", "http://themagicipod.com/WEEZ-TTS.mp3", "http://themagicipod.com/WEEZ-TIP.mp3", "http://themagicipod.com/EVAN-99P.mp3", "http://themagicipod.com/EVAN-IDC.mp3", "http://themagicipod.com/EVAN-DMX.mp3", "http://themagicipod.com/EVAN-GETL.mp3", "http://themagicipod.com/EVAN-MB.mp3", "http://themagicipod.com/EVAN-MNB.mp3", "http://themagicipod.com/EVAN-RSS.mp3", "http://themagicipod.com/EVAN-TTS.mp3", "http://themagicipod.com/EVAN-TIP.mp3", "http://themagicipod.com/PAR-CRANK.mp3", "http://themagicipod.com/PAR-IDC.mp3", "http://themagicipod.com/PAR-LAFFY.mp3", "http://themagicipod.com/PAR-MB.mp3", "http://themagicipod.com/PAR-SNAP.mp3", "http://themagicipod.com/PAR-STUNT.mp3", "http://themagicipod.com/PAR-WALK.mp3", "http://themagicipod.com/PAR-TIP.mp3", "http://themagicipod.com/FOB-CRANK.mp3", "http://themagicipod.com/FOB-IDC.mp3", "http://themagicipod.com/FOB-LEAN.mp3", "http://themagicipod.com/FOB-NEL.mp3", "http://themagicipod.com/FOB-POP.mp3", "http://themagicipod.com/FOB-SNAP.mp3", "http://themagicipod.com/FOB-STUNT.mp3", "http://themagicipod.com/FOB-WALK.mp3", "http://themagicipod.com/FRAY-99P.mp3", "http://themagicipod.com/FRAY-BEO.mp3", "http://themagicipod.com/FRAY-DMX.mp3", "http://themagicipod.com/FRAY-GETL.mp3", "http://themagicipod.com/FRAY-LOSE.mp3", "http://themagicipod.com/FRAY-MNB.mp3", "http://themagicipod.com/FRAY-RSS.mp3", "http://themagicipod.com/FRAY-TTS.mp3", "http://themagicipod.com/HTD-99P.mp3", "http://themagicipod.com/HTD-BEO.mp3", "http://themagicipod.com/HTD-DMX.mp3", "http://themagicipod.com/HTD-GETL.mp3", "http://themagicipod.com/HTD-MB.mp3", "http://themagicipod.com/HTD-MNB.mp3", "http://themagicipod.com/HTD-TIP.mp3", "http://themagicipod.com/HTD-TTS.mp3", "http://themagicipod.com/PAN-CRANK.mp3", "http://themagicipod.com/PAN-IDC.mp3", "http://themagicipod.com/PAN-LAFFY.mp3", "http://themagicipod.com/PAN-NEL.mp3", "http://themagicipod.com/PAN-SNAP.mp3", "http://themagicipod.com/PAN-STUNT.mp3", "http://themagicipod.com/PAN-WALK.mp3", "http://themagicipod.com/VAN-99P.mp3", "http://themagicipod.com/VAN-IDC.mp3", "http://themagicipod.com/VAN-DMX.mp3", "http://themagicipod.com/VAN-GETL.mp3", "http://themagicipod.com/VAN-MB.mp3", "http://themagicipod.com/VAN-MNB.mp3", "http://themagicipod.com/VAN-TTS.mp3", "http://themagicipod.com/MOD-99P.mp3", "http://themagicipod.com/MOD-BEO.mp3", "http://themagicipod.com/MOD-DMX.mp3", "http://themagicipod.com/MOD-GETL.mp3", "http://themagicipod.com/MOD-MB.mp3", "http://themagicipod.com/MOD-MNB.mp3", "http://themagicipod.com/MOD-TIP.mp3", "http://themagicipod.com/GRE-CRANK.mp3", "http://themagicipod.com/GRE-LAFFY.mp3", "http://themagicipod.com/GRE-LEAN.mp3", "http://themagicipod.com/GRE-IDC.mp3", "http://themagicipod.com/GRE-POP.mp3", "http://themagicipod.com/GRE-WALK.mp3", "http://themagicipod.com/OK-CRANK.mp3", "http://themagicipod.com/OK-LAFFY.mp3", "http://themagicipod.com/OK-LEAN.mp3", "http://themagicipod.com/OK-OVER.mp3", "http://themagicipod.com/OK-POP.mp3", "http://themagicipod.com/OK-WALK.mp3", "http://themagicipod.com/YEL-IDC.mp3", "http://themagicipod.com/YEL-LAFFY.mp3", "http://themagicipod.com/YEL-SNAP.mp3", "http://themagicipod.com/YEL-NEL.mp3", "http://themagicipod.com/YEL-STUNT.mp3", "http://themagicipod.com/YEL-WALK.mp3", "http://themagicipod.com/AVR-CRANK.mp3", "http://themagicipod.com/AVR-LAFFY.mp3", "http://themagicipod.com/AVR-LEAN.mp3", "http://themagicipod.com/AVR-NEL.mp3", "http://themagicipod.com/AVR-POP.mp3", "http://themagicipod.com/AVR-WALK.mp3", "http://themagicipod.com/BLI-99P.mp3", "http://themagicipod.com/BLI-BEO.mp3", "http://themagicipod.com/BLI-DMX.mp3", "http://themagicipod.com/BLI-MNB.mp3", "http://themagicipod.com/BLI-RSS.mp3", "http://themagicipod.com/BLI-TTS.mp3", "http://themagicipod.com/STA-GETL.mp3", "http://themagicipod.com/STA-LOSE.mp3", "http://themagicipod.com/STA-MNB.mp3", "http://themagicipod.com/STA-RSS.mp3", "http://themagicipod.com/STA-TTS.mp3", "http://themagicipod.com/YOLO-LOSE.mp3", "http://themagicipod.com/YOLO-OVER.mp3", "http://themagicipod.com/YOLO-RSS.mp3", "http://themagicipod.com/YOLO-TTS.mp3", "http://themagicipod.com/SOUL-LOSE.mp3", "http://themagicipod.com/SOUL-OVER.mp3", "http://themagicipod.com/SOUL-RSS.mp3", "http://themagicipod.com/SOUL-TTS.mp3", "http://themagicipod.com/CAKE-LOSE.mp3", "http://themagicipod.com/CAKE-OVER.mp3", "http://themagicipod.com/CAKE-RSS.mp3", "http://themagicipod.com/CAKE-TTS.mp3", "http://themagicipod.com/MCR-LOSE.mp3", "http://themagicipod.com/MCR-OVER.mp3", "http://themagicipod.com/MCR-TTS.mp3", "http://themagicipod.com/WHST-LOSE.mp3", "http://themagicipod.com/WHST-TTS.mp3"];

shuffle(playlist);

let audio;
let currentTrack;

start();

function start() {
	currentTrack = 0;
	audio = $('audio');
	audio[0].volume = .40;
	len = playlist.length;
    
    run(playlist[currentTrack], audio[0]);
    
	audio[0].addEventListener('ended',function(e){
		currentTrack++;
		if(currentTrack == len){
			currentTrack = 0;
		}
		run(playlist[currentTrack],audio[0]);
	});
};

function run(link, player){
	
	let base = link.split('-')[0].split('/')[3];
	let mix = link.split('-')[1].split('.')[0];

	let leftImg = 'http://themagicipod.com/' + mix + '.png';
	let rightImg = 'http://themagicipod.com/' + base + '.png';

	$('.leftImg').html('<img src="' + leftImg + '">');
	$('.rightImg').html('<img src="' + rightImg + '">');
	
	player.src = link;
	audio[0].load();
	audio[0].play();
};

function shuffle(array) {
	let currentIndex = array.length, temporaryValue, randomIndex ;

	while (0 !== currentIndex) {

		randomIndex = Math.floor(Math.random() * currentIndex);
		currentIndex -= 1;

		temporaryValue = array[currentIndex];
		array[currentIndex] = array[randomIndex];
		array[randomIndex] = temporaryValue;
	}

	return array;
};